import sys
from Connexion import Connexion
from Client import Client
from Protocole_xml import Protocole_xml
from Protocole_json import Protocole_json
from Prompt import Prompt
from FileManager import FileManager


if __name__ == '__main__':

    if len(sys.argv) <= 2:
        print("Ce client nÃ©cessite le port et le format de message transmis, sois xml ou Json.")
        sys.exit(1)

    host = '138.197.156.251'
    port = int(sys.argv[1])

    fileManager = FileManager()

    if (sys.argv[2] == "xml"):
        protocole = Protocole_xml(fileManager)
    elif(sys.argv[2] == "json"):
        protocole = Protocole_json(fileManager)
    else:
        print("Protocole invalide")
        sys.exit(1)


    connexion = Connexion(host, port)

    client = Client(connexion, protocole, fileManager)

    if (sys.argv[3] == "prompt"):
        prompt = Prompt(client)
