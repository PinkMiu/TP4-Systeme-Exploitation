import xml.dom.minidom
from Protocole import Protocole


class Protocole_xml(Protocole):  ## sous classe pour protocole xml
    """Interface du langage de communication XML"""

    def __init__(self):
        super(Protocole_xml).__init__()

    def generateXmlFormat(self, balise, text=''):
        messageToSend = xml.dom.minidom.Document()

        newElement = messageToSend.createElement(balise)
        messageToSend.appendChild(newElement)

        if text:
            text_xml = messageToSend.createTextNode(text)
            newElement.appendChild(text_xml)

        return messageToSend

    def generate(self, balise, text=''):
        answer  = self.generateXmlFormat(balise, text)
        return answer.toxml()

    def interpreter(self, data):
        xmlData = xml.dom.minidom.parseString(data)

        if (xmlData.getElementsByTagName("bonjourClient")):
            answer = "Oui"
            return answer

        if (xmlData.getElementsByTagName("nomServeur")):
            for node in xmlData.getElementsByTagName("nomServeur"):
                answer = node.firstChild.data
                return answer
        